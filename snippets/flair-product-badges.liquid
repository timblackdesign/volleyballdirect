{% comment %}
************************************************************************
* NOTE: This file is generated by the Flair app and should not be modified.
*
* Any changes made to this file will be overwritten the next time you change
* your Flair badges in the app settings.
*
* Optional parameters:
*
* flair_badge_max   - the maximum number of badges to show; defaults to 1
* flair_css_class   - optional additional css classes to add to .flair-badge-wrapper
                      (see below for available classes)
* flair_css         - optional additional css to add to the badge wrapper
*
* Example multiple badges, display inline:
*   {% include 'flair-product-badges', with flair_badge_max: 2, flair_css_class: 'flair-inline flair-space-tb-md' %}
*
* Flair: https://apps.shopify.com/flair
*
* Copyright Brainy Atom LLC, All Rights Reserved.
************************************************************************
{% endcomment %}
{% if flair_css == blank %}
  {% if flair_css_class == blank %}
    {% assign flair_css_class = "flair-space-tb-md" %}
  {% endif %}
{% endif %}
{% if flair_global_init == blank %}
  <style>
    .flair-badge-wrapper.flair-inline { display: inline-block; }
    .flair-badge-wrapper.flair-center { text-align: center; } /* will not work with .flair-inline */
    .flair-badge-wrapper.flair-space-sm { margin: 5px; }
    .flair-badge-wrapper.flair-space-md { margin: 10px; }
    .flair-badge-wrapper.flair-space-lg { margin: 20px; }
    .flair-badge-wrapper.flair-space-tb-sm { margin-top: 5px; margin-bottom: 5px; }
    .flair-badge-wrapper.flair-space-tb-md { margin-top: 10px; margin-bottom: 10px; }
    .flair-badge-wrapper.flair-space-tb-lg { margin-top: 20px; margin-bottom: 20px; }
    .flair-badge-wrapper.flair-space-lr-sm { margin-left: 10px; margin-right: 10px; }
    .flair-badge-wrapper.flair-space-lr-md { margin-left: 10px; margin-right: 10px; }
    .flair-badge-wrapper.flair-space-lr-lg { margin-left: 20px; margin-right: 20px; }
    .flair-badge-wrapper.flair-space-t-sm { margin-top: 5px; }
    .flair-badge-wrapper.flair-space-t-md { margin-top: 10px; }
    .flair-badge-wrapper.flair-space-t-lg { margin-top: 20px; }
    .flair-badge-wrapper.flair-space-b-sm { margin-bottom: 5px; }
    .flair-badge-wrapper.flair-space-b-md { margin-bottom: 10px; }
    .flair-badge-wrapper.flair-space-b-lg { margin-bottom: 20px; }
    .flair-badge-wrapper.flair-space-l-sm { margin-left: 5px; }
    .flair-badge-wrapper.flair-space-l-md { margin-left: 10px; }
    .flair-badge-wrapper.flair-space-l-lg { margin-left: 20px; }
    .flair-badge-wrapper.flair-space-r-sm { margin-right: 5px; }
    .flair-badge-wrapper.flair-space-r-md { margin-right: 10px; }
    .flair-badge-wrapper.flair-space-r-lg { margin-right: 20px; }

    @media only screen and (min-width:480px){
      .flair-badge-wrapper-full { display: inherit; } .flair-badge-wrapper-mobile { display: none !important; }
    }
    @media only screen and (max-width:480px) {
      .flair-badge-wrapper-full { display: none !important; } .flair-badge-wrapper-mobile { display: inherit; }
    }
  </style>
{% endif %}
{% assign flair_global_init = true %}

{% assign flair_badge_max = flair_badge_max | default: 1 %}
{% assign flair_badge_count = 0 %}

{% assign flair_age_seconds = product.created_at | date: "%s" %}
{% assign flair_age_seconds = 'now' | date: '%s' | minus: flair_age_seconds %}

{% assign flair_sale_amount_min = 0 %}
{% assign flair_sale_amount_max = 0 %}
{% assign flair_sale_percent_min = 0 %}
{% assign flair_sale_percent_max = 0 %}
{% assign flair_inventory_total = 0 %}
{% assign flair_inventory_can_sell_out = true %}
{% for v in product.variants %}
  {% if v.inventory_management != 'shopify' or v.inventory_policy == 'continue' %}
    {% assign flair_inventory_can_sell_out = false %}
  {% endif %}

  {% if v.inventory_quantity > 0 %}
    {% assign flair_inventory_total = flair_inventory_total | plus: v.inventory_quantity %}
  {% endif %}

  {% if v.price and v.compare_at_price %}
    {% assign flair_sale_amount = v.compare_at_price | minus: v.price %}
    {% if flair_sale_amount > 0 %}
      {% assign flair_sale_percent = flair_sale_amount | times: 100.0 | divided_by: v.compare_at_price %}
      {% if flair_sale_amount_min == 0 or flair_sale_amount < flair_sale_amount_min %}
        {% assign flair_sale_amount_min = flair_sale_amount %}
      {% endif %}
      {% if flair_sale_amount_max == 0 or flair_sale_amount > flair_sale_amount_max %}
        {% assign flair_sale_amount_max = flair_sale_amount %}
      {% endif %}
      {% if flair_sale_percent_min == 0 or flair_sale_percent < flair_sale_percent_min %}
        {% assign flair_sale_percent_min = flair_sale_percent | round: 2 %}
      {% endif %}
      {% if flair_sale_percent_max == 0 or flair_sale_percent > flair_sale_percent_max %}
        {% assign flair_sale_percent_max = flair_sale_percent | round: 2 %}
      {% endif %}
    {% endif %}
  {% endif %}
{% endfor %}

{% if flair_badge_count < flair_badge_max %}
  {% if flair_age_seconds > 0 and flair_age_seconds <= 2592000 %}
    {% assign flair_badge_count = flair_badge_count | plus: 1 %}
    <div class="flair-badge-wrapper flair-badge-wrapper-full {{ flair_css_class }}" {% if flair_css %}style="{{ flair_css }}"{% endif %}>
      <div class="flair-badge" style="display: inline-block;box-sizing: border-box;color: #ffffff;background-color: #11f003;font-size: 16px;line-height: 24px;position: relative;height: 24px;max-width: 100%;vertical-align: bottom;padding-left: 12px;padding-right: 12px"><div style="white-space: nowrap;overflow: hidden">New!</div></div>
    </div>
    <div class="flair-badge-wrapper flair-badge-wrapper-mobile {{ flair_css_class }}" {% if flair_css %}style="{{ flair_css }}"{% endif %}>
      <div class="flair-badge" style="display: inline-block;box-sizing: border-box;color: #ffffff;background-color: #11f003;font-size: 14px;line-height: 22px;position: relative;height: 22px;max-width: 100%;vertical-align: bottom;padding-left: 10px;padding-right: 10px"><div style="white-space: nowrap;overflow: hidden">New!</div></div>
    </div>

  {% endif %}
{% endif %}
{% assign flair_badge_max = blank %}
{% assign flair_css = blank %}
{% assign flair_css_class = blank %}
